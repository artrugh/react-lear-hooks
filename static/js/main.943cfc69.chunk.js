(this["webpackJsonpreact-learn-hook"]=this["webpackJsonpreact-learn-hook"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),l=(n(14),n(2)),o=n(5),u=n(1),s=(n(15),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),m=(n(16),Object(a.memo)((function(e){var t=Object(a.useState)({title:"",amount:""}),n=Object(l.a)(t,2),c=n[0],i=n[1],m=function(e,t){var n=e.target.value;i((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},t,n))}))};return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement("div",{className:"card"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.addIngredientHandler(c)}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:c.title,onChange:function(e){return m(e,"title")}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:c.amount,onChange:function(e){return m(e,"amount")}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),e.loading&&r.a.createElement(s,null)))))}))),d=(n(17),Object(a.memo)((function(e){return r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,e.ingredients.map((function(t){return r.a.createElement("li",{key:t.id,onClick:function(){return e.removeIngredientHandler(t.id)}},r.a.createElement("span",null,t.title),r.a.createElement("span",null,t.amount,"x"))}))))}))),E=(n(18),Object(a.memo)((function(e){return console.log("RENDERING ERRORMODAL BEFORE"),Object(a.useEffect)((function(){console.log("RENDERING ERRORMODAL")})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:e.onClose}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,e.children),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.onClose},"Okay"))))}))),f=(n(19),{}),b=[],O={},g=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(a.useState)(f)[1],n=Object(a.useCallback)((function(e,t){var n=O[e](f,t);f=Object(u.a)(Object(u.a)({},f),n),b.forEach((function(e){return e(f)}))}),[]);return Object(a.useEffect)((function(){e&&b.push(t)}),[t,e]),[f,n]},j=Object(a.memo)((function(e){var t=e.dispatchHttp,n=e.clean,c=Object(a.useState)(""),i=Object(l.a)(c,2),o=i[0],u=i[1],s=Object(a.useRef)(),m=g()[0];return Object(a.useEffect)((function(){var e=setTimeout((function(){o===s.current.value&&function(){var e=0===o.length?"":'?orderBy="title"&equalTo="'.concat(o,'"');t("https://react-hooks-4782a.firebaseio.com/ingredients.json"+e,"GET",null,null,"SET")}()}),900);return function(){clearTimeout(e)}}),[o,t,s]),r.a.createElement("section",{className:"search"},m.error&&r.a.createElement(E,{onClose:n},m.error),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),m.loading&&r.a.createElement("p",{style:{margin:0}},"loading..."),r.a.createElement("input",{ref:s,type:"text",value:o,onChange:function(e){return u(e.target.value)}}))))})),p=function(){var e=g(!1)[1],t=g()[0],n=Object(a.useCallback)((function(){return e("CLEAN")}),[e]),r=Object(a.useCallback)((function(t,n,a,r,c){e("SEND",c),fetch(t,{method:n,body:a,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e("RESPONSE",{response:t,ingredient:r})})).catch((function(t){e("ERROR")}))}),[e]);return Object(a.useEffect)((function(){if(t.error||t.loading||"REMOVE"!==t.identifer)if(t.error||t.loading||"ADD"!==t.identifer){if(!t.error&&!t.loading&&"SET"===t.identifer){var n=t.response,a=[];for(var r in n)a.push({id:r,title:n[r].title,amount:n[r].amount});e("SET",a)}}else e("ADD",Object(u.a)({id:t.response.name},t.ingredient));else e("REMOVE",t.ingredient)}),[t.error,t.loading,t.response,t.identifer,t.ingredient,e]),[r,n]},h=function(){var e=p(),t=Object(l.a)(e,2),n=t[0],c=t[1],i=g()[0],o=Object(a.useCallback)((function(e){n("https://react-hooks-4782a.firebaseio.com/ingredients.json","POST",JSON.stringify(e),e,"ADD")}),[n]),u=Object(a.useCallback)((function(e){n("https://react-hooks-4782a.firebaseio.com/ingredients/".concat(e,".json"),"DELETE",null,e,"REMOVE")}),[n]),s=Object(a.useMemo)((function(){return r.a.createElement(d,{ingredients:i.ingredients,removeIngredientHandler:u})}),[i.ingredients,u]);return r.a.createElement("div",{className:"App"},i.error&&r.a.createElement(E,{onClose:c},i.error),r.a.createElement(m,{loading:i.loading,addIngredientHandler:o}),r.a.createElement("section",null,r.a.createElement(j,{dispatchHttp:n,clean:c}),s))},v=(n(20),function(){var e=g(!1)[1];return r.a.createElement("div",{className:"auth"},r.a.createElement("div",{className:"card"},r.a.createElement("h2",null,"You are not authenticated!"),r.a.createElement("p",null,"Please log in to continue."),r.a.createElement("button",{onClick:function(){e("LOGIN")}},"Log In")))}),N=function(){return g()[0].isAuth?r.a.createElement(h,null):r.a.createElement(v,null)},R=n(8),k={loading:!1,error:null,response:null,identifer:null,ingredient:null,isAuth:!1,ingredients:[]};(function(){var e,t;e={LOGIN:function(e){return Object(u.a)(Object(u.a)({},e),{},{isAuth:!0})},SEND:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:null,response:null,identifer:t})},RESPONSE:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{loading:!1,response:t.response,ingredient:t.ingredient})},ERROR:function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:"something went wrong"})},CLEAN:function(e){return Object(u.a)(Object(u.a)({},k),{},{isAuth:e.isAuth})},SET:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{ingredients:t})},ADD:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{ingredients:[].concat(Object(R.a)(e.ingredients),[t])})},REMOVE:function(e,t){var n=e.ingredients.filter((function(e){return e.id!==t}));return Object(u.a)(Object(u.a)({},e),{},{ingredients:n})}},(t=k)&&(f=Object(u.a)(Object(u.a)({},f),t)),O=Object(u.a)(Object(u.a)({},O),e)})(),i.a.render(r.a.createElement(N,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.943cfc69.chunk.js.map